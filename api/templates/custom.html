{% extends "base.html" %}
{% block script %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="https://cdn.bokeh.org/bokeh/release/bokeh-3.5.0.min.js"></script> 
<script>
function toggler(tid, fid, counter) {
  $('.'+fid).toggle();
  total = $('#' + tid + ' >tbody >tr:visible').length;
  $('#'+counter).text(total)
  if ($('#' + tid + ' >tbody >tr').is(":hidden")) {
    $('#' + fid + 'btn').text('Show versioned DOIs');
  } else {
    $('#' + fid + 'btn').text('Filter versioned DOIs');
  }
}
function nav_post(field, value, source="") {
  url = "/doiui/custom";
  payload = '<input type="text" name="field" value="' + field + '" />' +
            '<input type="text" name="value" value="' + value + '" />'
  if (source) {
    payload = payload +
              '<input type="text" name="jrc_obtained_from" value="' + source + '" />'
  }
  var form = $('<form style="visibility:hidden" action="' + url + '" method="post">' +
             payload + '</form>');
  $('body').append(form);
  form.submit();
}

function nav_post_year(field, value, year="All") {
  url = "/doiui/custom";
  payload = '<input type="text" name="field" value="' + field + '" />' +
            '<input type="text" name="value" value="' + value + '" />'
  if (year != 'All') {
    url = url + "/" + year;
  }
  var form = $('<form style="visibility:hidden" action="' + url + '" method="post">' +
             payload + '</form>');
  $('body').append(form);
  form.submit();
}
</script>
{% endblock %}
{% block onload %}
onload="tableInitialize();"
{% endblock %}

{% block content %}
  <div class="flexrow" style="margin: 10px 0 0 10px;">
    <div class="flexcol" style="width:80%">
      <h2>{{title|safe}}</h2>
    </div>
    <div class="flexcol" style="width:150">
      <div style="font-size: 18pt">Open Access<br>
        <div class="flexrow">
          <div class="flexcol">
          {{ chartdiv | safe }} 
          {{ chartscript | safe }}
          </div>
          <div class="flexcol" style="margin-left: 5px">
          {{ oamsg | safe }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="flexrow">
    <div class="flexcol" style="margin: 10px 0 0 10px">
    {{ html | safe }}
  </div>
{% endblock %}
